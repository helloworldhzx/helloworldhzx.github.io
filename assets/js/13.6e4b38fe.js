(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{501:function(s,n,a){s.exports=a.p+"assets/img/loader.7508ba78.png"},517:function(s,n,a){"use strict";a.r(n);var e=a(6),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"安装上手"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装上手"}},[s._v("#")]),s._v(" 安装上手")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm init -y // 生成package.json文件\nnpm i webpack webpack-cli --save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("blockquote",[e("p",[s._v("P.S. webpack 是 Webpack 的核心模块，webpack-cli 是 Webpack 的 CLI 程序，用来在命令行中调用 Webpack。")])]),s._v(" "),e("p",[s._v("安装完成之后，webpack-cli 所提供的 CLI 程序就会出现在 node_modules/.bin 目录当中，我们可以通过 npx 快速找到 CLI 并运行它，具体操作如下：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npx webpack --version\n4.43.0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("blockquote",[e("p",[s._v("P.S. npx 是 npm 5.2 以后新增的一个命令，可以用来更方便的执行远程模块或者项目 node_modules 中的 CLI 程序。")])]),s._v(" "),e("p",[s._v("直接运行 webpack 命令来打包 JS 模块代码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npx webpack\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("将webpack启动配置到package的scripts中")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('"scripts": {\n    "build": "webpack"\n  },\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"devserver配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#devserver配置"}},[s._v("#")]),s._v(" devServer配置")]),s._v(" "),e("p",[s._v("用来自动化（自动编译，自动打开浏览器，自定刷新浏览器等）\n特点： 只会在内存中编辑打包，不会有任何输出\n启动devServer指令为： npx webpack-dedv-server")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("module.exports = {\n  devServer: {\n      contentBase: resolve(__dirname,'build'),\n      compress： true // 启动gzip压缩\n      port: 3000,\n      open: true, //自动打开浏览器\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"自定义配置webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义配置webpack"}},[s._v("#")]),s._v(" 自定义配置webpack")]),s._v(" "),e("p",[s._v("之前打包使用的是webpack的默认配置，可以添加webpack.config.js文件自定义配置。"),e("br"),s._v("\nwebpack.config.js 是一个运行在 Node.js 环境中的 JS 文件，我们需要按照 CommonJS的方式编写代码")]),s._v(" "),e("p",[s._v("指定打包入口和出口")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const path = require('path')\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.join(__dirname, 'output')\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"让配置文件支持智能提示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#让配置文件支持智能提示"}},[s._v("#")]),s._v(" 让配置文件支持智能提示")]),s._v(" "),e("p",[s._v("VSCode 对于代码的自动提示是根据成员的类型推断出来的，通过 import 的方式导入 Webpack 模块中的 Configuration类型，然后根据类型注释的方式将变量标注为这个类型，这样我们在编写这个对象的内部结构时就可以有正确的智能提示了")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// ./webpack.config.js\nimport { Configuration } from 'webpack'\n\n/**\n * @type {Configuration}\n */\nconst config = {\n  entry: './src/index.js',\n  output: {\n    filename: 'bundle.js'\n  }\n}\n\nmodule.exports = config\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("blockquote",[e("p",[s._v("P.S. 在编写配置时才需要，打包时需要注释掉，commonJs不支持import写法会报错。另外需要定义变量保存不能直接module.exports = {}，不然提示不生效")])]),s._v(" "),e("h2",{attrs:{id:"webpack工作模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack工作模式"}},[s._v("#")]),s._v(" webpack工作模式")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://webpack.docschina.org/concepts/mode/",target:"_blank",rel:"noopener noreferrer"}},[s._v("mode"),e("OutboundLink")],1),s._v(" 配置选项，告知 webpack 使用相应环境的内置优化")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("选项")]),s._v(" "),e("th",[s._v("描述")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("development")]),s._v(" "),e("td",[s._v("启用 NamedChunksPlugin 和 NamedModulesPlugin")])]),s._v(" "),e("tr",[e("td",[s._v("production")]),s._v(" "),e("td",[s._v("启用 FlagDependencyUsagePlugin,FlagIncludedChunksPlugin等插件")])]),s._v(" "),e("tr",[e("td",[s._v("none")]),s._v(" "),e("td",[s._v("退出任何默认优化选项")])])])]),s._v(" "),e("p",[s._v("配置mode的方式有两种：")]),s._v(" "),e("ul",[e("li",[s._v("webpack.config.js上配置mode属性")]),s._v(" "),e("li",[s._v("通过CLI --mode=xxx 传入参数")])]),s._v(" "),e("h2",{attrs:{id:"loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loader"}},[s._v("#")]),s._v(" loader")]),s._v(" "),e("p",[s._v("webpack 只能理解 JavaScript 和 JSON 文件。loader 让 webpack 能够去处理其他类型的文件，并将它们转换为有效 模块，以供应用程序使用，以及被添加到依赖图中。\n"),e("img",{attrs:{src:a(501),alt:"loader执行顺序"}})]),s._v(" "),e("h3",{attrs:{id:"打包css样式资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包css样式资源"}},[s._v("#")]),s._v(" 打包css样式资源")]),s._v(" "),e("p",[s._v("不配置loader直接使用css文件是打包报错的,需要配置css-loader")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install css-loader --save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('module: {\n    rules:[{\n      test:/\\.css$/, // 根据打包过程中所遇到文件路径匹配是否使用这个 loader\n      use: "css-loader" // 指定具体的 loader\n    }]\n  }\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("在配置对象的 module 属性中添加一个 rules 数组。这个数组就是我们针对资源模块的加载规则配置，其中的每个规则对象都需要设置两个属性：")]),s._v(" "),e("ul",[e("li",[s._v("test 属性，它是一个正则表达式，用来匹配打包过程中所遇到文件路径，这里我们是以 .css 结尾;")]),s._v(" "),e("li",[s._v("use 属性，它用来指定匹配到的文件需要使用的 loader，这里用到的是 css-loader")])]),s._v(" "),e("p",[s._v("只配置css-loader时只是把css转成js代码，内容是样式字符串，需要在 css-loader 的基础上再使用一个 style-loader，把 css-loader 转换后的结果通过 style 标签追加到页面上。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install style-loader --save-dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('module: {\n    rules:[{\n      test:/\\.css$/,\n      use: ["style-loader","css-loader"]\n    }]\n  }\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("blockquote",[e("p",[s._v("P.S 有多个loader时是从右到左执行，需要注意loader之间的顺序")])]),s._v(" "),e("h3",{attrs:{id:"打包图片资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#打包图片资源"}},[s._v("#")]),s._v(" 打包图片资源")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install url-loader --save-dev\n\n// webpack.config.js\nmodule: {\n    rules: [{\n    // 处理不了HTML中img图片\n    test: /\\.(png|jpg|gif)$/i,\n      use: [{\n      // 需要下载url-loader、file-loader,url-loader依赖file-loader\n        loader: 'url-loader',\n        options: {\n        // 图片大小小于8kb，就会被base64处理\n        // 优点：减少请求次数（减轻服务器压力）\n        // 缺点：图片体积会增大（文件请求速度更慢）\n          limit: 8*1024,\n          // 打包是根据esmodule还是commonjs进行打包\n          esModule: false,\n          // 文件重命名\n          // [hash:10] 取hash前10位\n          // [ext] 文件原来的后缀\n          name: '[hash:10].[ext]',\n          outputPath: 'img' // 打包到img文件夹下\n        },\n        }],\n    }],\n  }\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br")])]),e("p",[s._v("当HTML中有img标签引入图片时，url-loader处理不了，需要html-loader")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm i html-loader --save-dev\n\n// webpack.config.js\nmodule: {\n    rules: [{\n      test: /\\.(png|jpg|gif)$/i,\n      use: [{\n        loader: 'url-loader',\n        options: {\n          limit: 8*1024\n        },\n      }],\n    },{\n        test:/\\.html$/,\n        use:[{\n            loader:'html-loader'\n        }]\n    }],\n  }\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("blockquote",[e("p",[s._v("P.S. html-loader是将HTML导出为字符串，默认情况下，每个可加载属性（例如- "),e("img",{attrs:{src:"image.png"}}),s._v('）都将导入（const img = require(\'./image.png\')或import img from "./image.png"")\n将img里的图片通过模块引入，从而能被url-loader处理')])]),s._v(" "),e("h3",{attrs:{id:"其他资源file-loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他资源file-loader"}},[s._v("#")]),s._v(" 其他资源file-loader")]),s._v(" "),e("h3",{attrs:{id:"css兼容性postcss-loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css兼容性postcss-loader"}},[s._v("#")]),s._v(" css兼容性postcss-loader")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(' rules:[{\n      test:/\\.css$/,\n      use: [\n        MiniCssExtractPlugin.loader,\n        "css-loader",\n        // postcss-preset-env帮postcss找到package.json中browserslist里面的配置，通过配置加载指定的兼容性\n        {\n            loader: "postcss-loader",\n            options: {\n                ident: "postcss",\n                plugins: ()=>{\n                    require("postcss-preset-env")()\n                }\n            }\n        }\n      ]\n    }]\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("h3",{attrs:{id:"mini-css-extract-plugin打包单独的css文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mini-css-extract-plugin打包单独的css文件"}},[s._v("#")]),s._v(" mini-css-extract-plugin打包单独的css文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('npm install --save-dev mini-css-extract-plugin\n\nmodule: {\n    rules:[{\n      test:/\\.css$/,\n      use: [\n        // 创建style标签，引入样式\n        // "style-loader",\n        // 取代style-lodaer, 将css生成单独的文件再引入\n        MiniCssExtractPlugin.loader,\n        "css-loader"\n      ]\n    }]\n  },\n  plugins:[\n    new MiniCssExtractPlugin()\n  ]\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("h3",{attrs:{id:"optimize-css-assets-webpack-plugin-压缩css文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#optimize-css-assets-webpack-plugin-压缩css文件"}},[s._v("#")]),s._v(" optimize-css-assets-webpack-plugin 压缩css文件")]),s._v(" "),e("h3",{attrs:{id:"js兼容性处理-转换成es5代码-babel-loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js兼容性处理-转换成es5代码-babel-loader"}},[s._v("#")]),s._v(" js兼容性处理  转换成es5代码 babel-loader")]),s._v(" "),e("p",[s._v("js兼容性处理 babel-loader @babel/core @babel/preset-env")]),s._v(" "),e("ol",[e("li",[s._v("基础的js处理--\x3e @babel/preset-env\n问题：只能处理基础的js问题，不能转换promise等")]),s._v(" "),e("li",[s._v("全部js兼容性处理--\x3e @babel/polyfill\n问题：会把所有兼容性问题都转换，很多不需要用到，增大文件体积")]),s._v(" "),e("li",[s._v("处理需要做兼容性问题的-按需加载--\x3e core-js")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('module: {\n    rules:[{\n        test:/\\.js$/,\n        exclude: /node_modules/,\n        loader: \'babel-loader\',\n        options: {\n        //预设：指定babel做怎么样的兼容性处理\n          presets:[\n            [\n             "@babel/preset-env",\n             {\n               //按需加载\n                 useBuiltIns: "usage",\n                 // 指定corejs版本\n                 corejs:{\n                     version: 3\n                 }，\n                 //指定兼容性做到哪个版本浏览器\n                 targets:{\n                     chrome:60,\n                     ie:9\n                 }\n             }\n            ]\n          ]\n      },\n    }]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br")])]),e("h3",{attrs:{id:"js语法检查eslint"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js语法检查eslint"}},[s._v("#")]),s._v(" js语法检查eslint")]),s._v(" "),e("p",[s._v("语法检查 eslint-loader eslint"),e("br"),s._v("\n注意只检查自己代码，不用检查第三方库"),e("br"),s._v("\n设置检查规则：package.json中eslintConfig中设置,也能配置单独文件.eslintrc"),e("br"),s._v(" "),e("code",[s._v('"eslintConfig":{"extends":"airbnb-base"}')]),e("br"),s._v("\n需要安装 eslint-config-airbnb-base eslint-plugin-import eslint")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("module: {\n    rules:[{\n        test:/\\.js$/,\n        exclude: /node_modules/,\n        loader: 'eslint-loader',\n        options: {\n          fix: true, // 打包时自动修复\n      },\n    }]\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("blockquote",[e("p",[s._v("P.S 打包时console会警告，可以在使用console代码前加一句注释"),e("code",[s._v("// eslint-disable-next-line")])])]),s._v(" "),e("h2",{attrs:{id:"插件plugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#插件plugin"}},[s._v("#")]),s._v(" 插件plugin")]),s._v(" "),e("p",[s._v("插件用于执行范围更广的任务。包括：打包优化，资源管理，注入环境变量。")]),s._v(" "),e("p",[s._v("几个插件最常见的应用场景：")]),s._v(" "),e("ul",[e("li",[s._v("实现自动在打包之前清除 dist 目录（上次的打包结果）；")]),s._v(" "),e("li",[s._v("自动生成应用所需要的 HTML 文件；")]),s._v(" "),e("li",[s._v("根据不同环境为代码注入类似 API 地址这种可能变化的部分；")]),s._v(" "),e("li",[s._v("拷贝不需要参与打包的资源文件到输出目录；")]),s._v(" "),e("li",[s._v("压缩 Webpack 打包完成后输出的文件；")]),s._v(" "),e("li",[s._v("自动发布打包结果到服务器实现自动部署。")])]),s._v(" "),e("h3",{attrs:{id:"clean-webpack-plugin用来自动清除输出目录的插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clean-webpack-plugin用来自动清除输出目录的插件"}},[s._v("#")]),s._v(" clean-webpack-plugin用来自动清除输出目录的插件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("npm install clean-webpack-plugin --save-dev\n\n// ./webpack.config.js\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin')\nmodule.exports = {\n  ...其他配置\n  plugins: [\n    new CleanWebpackPlugin()\n  ]\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h3",{attrs:{id:"html-webpack-plugin用来生成html页面-自动引入打包后的js-css不需要手动修改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#html-webpack-plugin用来生成html页面-自动引入打包后的js-css不需要手动修改"}},[s._v("#")]),s._v(" html-webpack-plugin用来生成html页面，自动引入打包后的js，css不需要手动修改")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ npm install html-webpack-plugin --save-dev\n// ./webpack.config.js\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin')\n\nmodule.exports = {\n  ...其他配置\n  plugins: [\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin()\n  ]\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("当需要修改title名称或一些 meta 标签等少量东西可以往HtmlWebpackPlugin传入对象进行配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('new HtmlWebpackPlugin({\n      title: \'zz\',\n      meta: {\n        viewport: \'width=device-width\'\n      }\n    })\n打包实际输出为如下\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8">\n    <title>zz</title>\n  <meta name="viewport" content="width=device-width"></head>\n  <body>\n  <script src="bundle.js"><\/script></body>\n</html>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("p",[s._v("若需要对 HTML 进行大量的自定义，可以使用HTML模板")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// ./webpack.config.js\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin')\n\nmodule.exports = {\n  ...其他配置\n  plugins: [\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      title: 'zz',\n      template: './src/index.html' //HTML模板\n    })\n  ]\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[s._v("打包生成多个html文件,只需在创建一个HtmlWebpackPlugin对象")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("module.exports = {\n  ...其他配置\n  plugins: [\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      title: 'zz',\n      template: './index.html' //HTML模板\n    }),\n    new HtmlWebpackPlugin({\n      filename:\"zz.html\",\n      title: 'zz',\n      template: './index.html' //HTML模板\n    })\n  ]\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("h3",{attrs:{id:"copy-webpack-plugin用于复制文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#copy-webpack-plugin用于复制文件"}},[s._v("#")]),s._v(" copy-webpack-plugin用于复制文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ npm install copy-webpack-plugin --save-dev\n// ./webpack.config.js\nconst CopyWebpackPlugin = require('copy-webpack-plugin')\n\nmodule.exports = {\n  plugins: [\n    new CopyWebpackPlugin([\n      'public' // 需要拷贝的目录或者路径通配符\n    ])\n  ]\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h3",{attrs:{id:"mini-css-extract-plugin打包单独的css文件-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mini-css-extract-plugin打包单独的css文件-2"}},[s._v("#")]),s._v(" mini-css-extract-plugin打包单独的css文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('npm install --save-dev mini-css-extract-plugin\n\nmodule: {\n    rules:[{\n      test:/\\.css$/,\n      use: [\n        // 创建style标签，引入样式\n        // "style-loader",\n        // 取代style-lodaer, 将css生成单独的文件再引入\n        MiniCssExtractPlugin.loader,\n        "css-loader"\n      ]\n    }]\n  },\n  plugins:[\n    new MiniCssExtractPlugin()\n  ]\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("h3",{attrs:{id:"optimize-css-assets-webpack-plugin-压缩css文件-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#optimize-css-assets-webpack-plugin-压缩css文件-2"}},[s._v("#")]),s._v(" optimize-css-assets-webpack-plugin 压缩css文件")]),s._v(" "),e("h3",{attrs:{id:"js、html代码压缩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js、html代码压缩"}},[s._v("#")]),s._v(" js、html代码压缩")]),s._v(" "),e("p",[s._v("js压缩使用UglifyJsPlugin插件压缩，生产环境默认带有UglifyJsPlugin插件\nhtml压缩在HtmlWebpackPlugin插件添加minify参数")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("new HtmlWebpackPlugin({\n      template: './index.html',\n      minify: {\n          //移除空格但是不会删除SCRIPT、style和textarea中的空格\n          collapseWhitespace: true,\n          //移除注释 但是会保留script和style中的注释\n          removeComments: true,\n          // 删除多余的属性\n          removeRedundantAttributes: true,\n          // 删除script的类型属性，在h5下面script的type默认值：text/javascript\n          removeScriptTypeAttributes: true,\n          // 删除style的类型属性，同上\n          removeStyleLinkTypeAttributes: true,\n          // 用short (HTML5) doctype替换doctype\n          useShortDoctype: true\n      }\n    }),\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("h2",{attrs:{id:"编写一个自己的markdown-loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编写一个自己的markdown-loader"}},[s._v("#")]),s._v(" 编写一个自己的markdown-loader")]),s._v(" "),e("p",[s._v("添加一个markdown-loader.js文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// ./markdown-loader.js\nmodule.exports = source => {\n  // 加载到的模块内容 => '# About\\n\\nthis is a markdown file.'\n  console.log(source)\n  // 返回值就是最终被打包的内容\n  return 'hello loader ~'\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("在webpack.config.js文件配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("module: {\n    rules: [\n      {\n        test: /\\.md$/,\n        // 直接使用相对路径\n        use: './markdown-loader'\n      }\n    ]\n  }\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("现在打包会报错，因为 Webpack加载资源文件的过程类似于一个工作管道，你可以在这个过程中依次使用多个 Loader，但是最终这个管道结束过后的结果必须是一段标准的 JS 代码字符串。\n"),e("img",{attrs:{src:"/loader.png",alt:"loader"}})]),s._v(" "),e("p",[s._v("解决的办法")]),s._v(" "),e("ul",[e("li",[s._v("直接在这个 Loader 的最后返回一段 JS 代码字符串")]),s._v(" "),e("li",[s._v("再找一个合适的加载器，在后面接着处理我们这里得到的结果。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// ./markdown-loader.js\nconst marked = require('marked')\n\nmodule.exports = source => {\n  // 1. 将 markdown 转换为 html 字符串\n  const html = marked(source)\n  // 2. 将 html 字符串拼接为一段导出字符串的 JS 代码\n  const code = `module.exports = ${JSON.stringify(html)}`\n  return code \n  // code => 'export default \"<h1>About</h1><p>this is a markdown file.</p>\"'\n}\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("多个loader，直接返回html，再由html-loader处理返回js代码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// ./markdown-loader.js\nconst marked = require('marked')\n\nmodule.exports = source => {\n  // 1. 将 markdown 转换为 html 字符串\n  const html = marked(source)\n  return html\n}\n\n// webpack-config.js 注意loader顺序\n module: {\n    rules: [\n      {\n        test: /\\.md$/,\n        use: [\n          'html-loader',\n          './markdown-loader'\n        ]\n      }\n    ]\n  }\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("h2",{attrs:{id:"编写一个自己的插件plugin-删除bundle里的-注释"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编写一个自己的插件plugin-删除bundle里的-注释"}},[s._v("#")]),s._v(" 编写一个自己的插件plugin  删除bundle里的/***/注释")]),s._v(" "),e("p",[s._v("Webpack 要求我们的插件必须是一个函数或者是一个包含 apply 方法的对象，一般我们都会定义一个类，在这个类中定义 apply 方法。然后在使用时，再通过这个类来创建一个实例对象去使用这个插件。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// ./remove-comments-plugin.js\nclass RemoveCommentsPlugin {\n  apply (compiler) {\n    console.log('RemoveCommentsPlugin 启动')\n    // compiler => 包含了我们此次构建的所有配置信息\n  }\n}\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("通过 compiler 对象的 hooks 属性访问到 emit 钩子，再通过 tap 方法注册一个钩子函数，这个方法接收两个参数：")]),s._v(" "),e("ul",[e("li",[s._v("第一个是插件的名称，我们这里的插件名称是 RemoveCommentsPlugin；")]),s._v(" "),e("li",[s._v("第二个是要挂载到这个钩子上的函数；")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// ./remove-comments-plugin.js\nclass RemoveCommentsPlugin {\n  apply (compiler) {\n    compiler.hooks.emit.tap('RemoveCommentsPlugin', compilation => {\n      // compilation => 可以理解为此次打包的上下文\n      for (const name in compilation.assets) {\n        console.log(name) // 输出文件名称\n      }\n    })\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("文件内容需要通过遍历的值对象中的 source 方法获取，修改内容之后需要暴露一个 source 方法用来返回新的内容。另外还需要再暴露一个 size 方法，用来返回内容大小，这是 Webpack 内部要求的格式，具体如下：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// ./remove-comments-plugin.js\nclass RemoveCommentsPlugin {\n  apply (compiler) {\n    compiler.hooks.emit.tap('RemoveCommentsPlugin', compilation => {\n      // compilation => 可以理解为此次打包的上下文\n      for (const name in compilation.assets) {\n        if (name.endsWith('.js')) {\n          const contents = compilation.assets[name].source()\n          const noComments = contents.replace(/\\/\\*{2,}\\/\\s?/g, '')\n          compilation.assets[name] = {\n            source: () => noComments,\n            size: () => noComments.length\n          }\n        }\n      }\n    })\n  }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h2",{attrs:{id:"性能优化配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能优化配置"}},[s._v("#")]),s._v(" 性能优化配置")]),s._v(" "),e("h3",{attrs:{id:"hmr"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hmr"}},[s._v("#")]),s._v(" HMR")]),s._v(" "),e("p",[s._v("HMR: hot module replacement 热模块替换 / 模块热替换\n作用：一个模块发生变化，只会重新打包这一个模块（而不是打包所有模块）\ndevServer配置hot, 修改文件时刷新整个项目")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("devServer: {\n    contentBase: resolve(__dirname, 'build'),\n    compress: true,\n    port: 3000,\n    open: true,\n    // 开启HMR功能\n    // 当修改了webpack配置，新配置要想生效，必须重新webpack服务\n    hot: true\n  }\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("样式文件：可以使用HMR功能：因为style-loader内部实现了~\njs文件：默认不能使用HMR功能 --\x3e 需要修改js代码，添加支持HMR功能的代码\n注意：HMR功能对js的处理，只能处理非入口js文件的其他文件。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("if (module.hot) {\n  // 一旦 module.hot 为true，说明开启了HMR功能。 --\x3e 让HMR功能代码生效\n  module.hot.accept('./print.js', function() {\n    // 方法会监听 print.js 文件的变化，一旦发生变化，其他模块不会重新打包构建。\n    // 会执行后面的回调函数\n    print();\n  });\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"source-map"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#source-map"}},[s._v("#")]),s._v(" source-map")]),s._v(" "),e("p",[s._v("一种提供源代码到构建后代码映射技（如果构建后代码出错了，通过映射可以追踪源代码错误）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("module.exports = {\n    devtool: 'source-map'\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("table",[e("thead",[e("tr",[e("th",[s._v("devtool")]),s._v(" "),e("th",[s._v("构建速度")]),s._v(" "),e("th",[s._v("重新构建速度")]),s._v(" "),e("th",[s._v("生产环境")]),s._v(" "),e("th",[s._v("品质")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("(none)")]),s._v(" "),e("td",[s._v("+++")]),s._v(" "),e("td",[s._v("+++")]),s._v(" "),e("td",[s._v("yes")]),s._v(" "),e("td",[s._v("打包后的代码")])]),s._v(" "),e("tr",[e("td",[s._v("eval")]),s._v(" "),e("td",[s._v("+++")]),s._v(" "),e("td",[s._v("+++")]),s._v(" "),e("td",[s._v("no")]),s._v(" "),e("td",[s._v("生成后的代码")])]),s._v(" "),e("tr",[e("td",[s._v("cheap-eval-source-map")]),s._v(" "),e("td",[s._v("+")]),s._v(" "),e("td",[s._v("++")]),s._v(" "),e("td",[s._v("no")]),s._v(" "),e("td",[s._v("转换过的代码（仅限行）")])]),s._v(" "),e("tr",[e("td",[s._v("cheap-module-eval-source-map")]),s._v(" "),e("td",[s._v("o")]),s._v(" "),e("td",[s._v("++")]),s._v(" "),e("td",[s._v("no")]),s._v(" "),e("td",[s._v("原始源代码（仅限行）")])]),s._v(" "),e("tr",[e("td",[s._v("eval-source-map")]),s._v(" "),e("td",[s._v("--")]),s._v(" "),e("td",[s._v("+")]),s._v(" "),e("td",[s._v("no")]),s._v(" "),e("td",[s._v("原始源代码")])]),s._v(" "),e("tr",[e("td",[s._v("cheap-source-map")]),s._v(" "),e("td",[s._v("+")]),s._v(" "),e("td",[s._v("o")]),s._v(" "),e("td",[s._v("no")]),s._v(" "),e("td",[s._v("转换过的代码（仅限行）")])]),s._v(" "),e("tr",[e("td",[s._v("cheap-module-source-map")]),s._v(" "),e("td",[s._v("o")]),s._v(" "),e("td",[s._v("-")]),s._v(" "),e("td",[s._v("no")]),s._v(" "),e("td",[s._v("原始源代码（仅限行）")])]),s._v(" "),e("tr",[e("td",[s._v("inline-cheap-source-map")]),s._v(" "),e("td",[s._v("+")]),s._v(" "),e("td",[s._v("o")]),s._v(" "),e("td",[s._v("no")]),s._v(" "),e("td",[s._v("转换过的代码（仅限行）")])]),s._v(" "),e("tr",[e("td",[s._v("inline-cheap-module-source-map")]),s._v(" "),e("td",[s._v("o")]),s._v(" "),e("td",[s._v("-")]),s._v(" "),e("td",[s._v("no")]),s._v(" "),e("td",[s._v("原始源代码（仅限行）")])]),s._v(" "),e("tr",[e("td",[s._v("source-map")]),s._v(" "),e("td",[s._v("--")]),s._v(" "),e("td",[s._v("--")]),s._v(" "),e("td",[s._v("yes")]),s._v(" "),e("td",[s._v("原始源代码")])]),s._v(" "),e("tr",[e("td",[s._v("inline-source-map")]),s._v(" "),e("td",[s._v("--")]),s._v(" "),e("td",[s._v("--")]),s._v(" "),e("td",[s._v("no")]),s._v(" "),e("td",[s._v("原始源代码")])]),s._v(" "),e("tr",[e("td",[s._v("hidden-source-map")]),s._v(" "),e("td",[s._v("--")]),s._v(" "),e("td",[s._v("--")]),s._v(" "),e("td",[s._v("yes")]),s._v(" "),e("td",[s._v("原始源代码")])]),s._v(" "),e("tr",[e("td",[s._v("nosources-source-map")]),s._v(" "),e("td",[s._v("--")]),s._v(" "),e("td",[s._v("--")]),s._v(" "),e("td",[s._v("yes")]),s._v(" "),e("td",[s._v("无源代码内容")])])])]),s._v(" "),e("blockquote",[e("p",[s._v("+++ 非常快速, ++ 快速, + 比较快, o 中等, - 比较慢, -- 慢")])]),s._v(" "),e("h2",{attrs:{id:"oneof"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#oneof"}},[s._v("#")]),s._v(" oneOf")]),s._v(" "),e("p",[s._v("当规则匹配时，只使用第一个匹配规则\n// 注意：不能有两个配置处理同一种类型文件")]),s._v(" "),e("h2",{attrs:{id:"缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缓存"}},[s._v("#")]),s._v(" 缓存")]),s._v(" "),e("p",[s._v("babel缓存，为改变的文件不会重复编译打包")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("{\n    test: /\\.js$/,\n    exclude: /node_modules/,\n    loader: \"babel-loader\",\n    options: {\n        presets: [\n            [\n                '@babel/preset-env',\n                {\n                    useBuiltIns: 'usage',\n                    corejs: { version: 3 },\n                    targets: {\n                        chrome: '60',\n                        firefox: '50'\n                    }\n                }\n            ]\n        ],\n        // 开启babel缓存\n        // 第二次构建时，会读取之前的缓存\n        cacheDirectory: true\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("p",[s._v("文件缓存，浏览器获取文件并缓存，设置hase值，当文件改变hase改变缓存失效，获取最新文件。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("output: {\n    filename: 'js/built.[contenthash:10].js',\n    path: resolve(__dirname, 'build')\n}\nnew MiniCssExtractPlugin({\n      filename: 'css/built.[contenthash:10].css'\n    }),\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("文件资源缓存")]),s._v(" "),e("ul",[e("li",[s._v("hash: 每次wepack构建时会生成一个唯一的hash值。"),e("br"),s._v("\n问题: 因为js和css同时使用一个hash值。"),e("br"),s._v("\n如果重新打包，会导致所有缓存失效。（可能我却只改动一个文件）")]),s._v(" "),e("li",[s._v("chunkhash：根据chunk生成的hash值。如果打包来源于同一个chunk，那么hash值就一样"),e("br"),s._v("\n问题: js和css的hash值还是一样的"),e("br"),s._v("\n因为css是在js中被引入的，所以同属于一个chunk")]),s._v(" "),e("li",[s._v("contenthash: 根据文件的内容生成hash值。不同文件hash值一定不一样")])]),s._v(" "),e("h2",{attrs:{id:"tree-shaking"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tree-shaking"}},[s._v("#")]),s._v(" tree shaking")]),s._v(" "),e("p",[s._v("去除沒被使用的代码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('前提：1. 必须使用ES6模块化  2. 开启production环境\n    作用: 减少代码体积\n\n    在package.json中配置 \n      "sideEffects": false 所有代码都没有副作用（都可以进行tree shaking）\n        问题：可能会把css / @babel/polyfill （副作用）文件干掉\n      "sideEffects": ["*.css", "*.less"]\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"code-split-代码分割"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#code-split-代码分割"}},[s._v("#")]),s._v(" code split 代码分割")]),s._v(" "),e("p",[s._v("方法一 根据入口文件代码分割（多入口）"),e("br"),s._v("\n方法二 splitChunks")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/*\n    1. 可以将node_modules中代码单独打包一个chunk最终输出\n    2. 自动分析多入口chunk中，有没有公共的文件。如果有会打包成单独一个chunk\n  */\n  optimization: {\n    splitChunks: {\n      chunks: 'all'\n    }\n  },\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("方法三 动态导入")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/*\n  通过js代码，让某个文件被单独打包成一个chunk\n  import动态导入语法：能将某个文件单独打包\n*/\nimport(/* webpackChunkName: 'test' */'./test')\n  .then(({ mul, count }) => {\n    // 文件加载成功~\n    // eslint-disable-next-line\n    console.log(mul(2, 5));\n  })\n  .catch(() => {\n    // eslint-disable-next-line\n    console.log('文件加载失败~');\n  });\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h2",{attrs:{id:"js文件懒加载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js文件懒加载"}},[s._v("#")]),s._v(" js文件懒加载")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("document.getElementById('btn').onclick = function() {\n  // 懒加载~：当文件需要使用时才加载~\n  // 预加载 prefetch：会在使用之前，提前加载js文件 \n  // 正常加载可以认为是并行加载（同一时间加载多个文件）  \n  // 预加载 prefetch：等其他资源加载完毕，浏览器空闲了，再偷偷加载资源\n  import(/* webpackChunkName: 'test', webpackPrefetch: true */'./test').then(({ mul }) => {\n    console.log(mul(4, 5));\n  });\n};\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("h2",{attrs:{id:"pwa"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pwa"}},[s._v("#")]),s._v(" PWA")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("new WorkboxWebpackPlugin.GenerateSW({\n      /*\n        1. 帮助serviceworker快速启动\n        2. 删除旧的 serviceworker\n\n        生成一个 serviceworker 配置文件~\n      */\n      clientsClaim: true,\n      skipWaiting: true\n    })\n\n\n/*\n  1. eslint不认识 window、navigator全局变量\n    解决：需要修改package.json中eslintConfig配置\n      \"env\": {\n        \"browser\": true // 支持浏览器端全局变量\n      }\n   2. sw代码必须运行在服务器上\n      --\x3e nodejs\n      --\x3e\n        npm i serve -g\n        serve -s build 启动服务器，将build目录下所有资源作为静态资源暴露出去\n*/\n// 注册serviceWorker\n// 处理兼容性问题\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker\n      .register('/service-worker.js')\n      .then(() => {\n        console.log('sw注册成功了~');\n      })\n      .catch(() => {\n        console.log('sw注册失败了~');\n      });\n  });\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br")])]),e("h2",{attrs:{id:"多进程打包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多进程打包"}},[s._v("#")]),s._v(" 多进程打包")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/* \n    开启多进程打包。 \n    进程启动大概为600ms，进程通信也有开销。\n    只有工作消耗时间比较长，才需要多进程打包\n*/\n{\n    loader: 'thread-loader',\n    options: {\n        workers: 2 // 进程2个\n    }\n},\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h2",{attrs:{id:"externals-外部扩展"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#externals-外部扩展"}},[s._v("#")]),s._v(" externals 外部扩展")]),s._v(" "),e("p",[s._v("防止将某些 import 的包(package)打包到bundle中，而是在运行时(runtime)再去从外部获取这些扩展依赖")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("externals: {\n    // 拒绝jQuery被打包进来\n    jquery: 'jQuery'\n  }\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"dll"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dll"}},[s._v("#")]),s._v(" dll")]),s._v(" "),e("p",[s._v("使用dll技术，对某些库（第三方库：jquery、react、vue...）进行单独打包")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// webpack.dll.js打包生成dll\nmodule.exports = {\n  entry: {\n    // 最终打包生成的[name] --\x3e jquery\n    // ['jquery'] --\x3e 要打包的库是jquery\n    jquery: ['jquery'],\n  },\n  output: {\n    filename: '[name].js',\n    path: resolve(__dirname, 'dll'),\n    library: '[name]_[hash]' // 打包的库里面向外暴露出去的内容叫什么名字\n  },\n  plugins: [\n    // 打包生成一个 manifest.json --\x3e 提供和jquery映射\n    new webpack.DllPlugin({\n      name: '[name]_[hash]', // 映射库的暴露的内容名称\n      path: resolve(__dirname, 'dll/manifest.json') // 输出文件路径\n    })\n  ],\n  mode: 'production'\n};\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// webpack.config.js\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'built.js',\n    path: resolve(__dirname, 'build')\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './src/index.html'\n    }),\n    // 告诉webpack哪些库不参与打包，同时使用时的名称也得变~\n    new webpack.DllReferencePlugin({\n      manifest: resolve(__dirname, 'dll/manifest.json')\n    }),\n    // 将某个文件打包输出去，并在html中自动引入该资源\n    new AddAssetHtmlWebpackPlugin({\n      filepath: resolve(__dirname, 'dll/jquery.js')\n    })\n  ],\n  mode: 'production'\n};\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("h2",{attrs:{id:"nopase"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nopase"}},[s._v("#")]),s._v(" noPase")]),s._v(" "),e("p",[s._v("忽略大型的 library 解析,提高构建性能。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("module: {\n    noParse: /jquery|lodash/,\n  }\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"ignoreplugin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ignoreplugin"}},[s._v("#")]),s._v(" ignorePlugin")]),s._v(" "),e("p",[s._v("忽略import、require的引入")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("new webpack.IgnorePlugin({\n      resourceRegExp: /^\\.\\/locale$/,\n      contextRegExp: /moment$/\n    })\n或者\nnew webpack.IgnorePlugin(/^\\.\\/locale$/,/moment$/)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);